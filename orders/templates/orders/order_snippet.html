<div class="col-md-12 mb-4">
    <h4 class="d-flex justify-content-between align-items-center mb-3">
    <span class="text-muted">Your cart</span>
    <span class="badge badge-secondary badge-pill">{{ object.cart.cartitem_set.all.count }}</span>
    </h4>
    <ul class="list-group mb-3 z-depth-1">
     {% for item in object.cart.cartitem_set.all %}
    <li class="list-group-item d-flex justify-content-between lh-condensed">
        <div>
            <h6 class="my-0"> {% if item.product.image %}
      <img style="width:50px; height:50px !important;" src='{{ item.product.image.url }}' class='img-fluid' />
      {% endif %}
        <h6 class="my-0">{{ item.quantity }} x {{ item.product.product_name}} <b>(for {{ item.days }} days)[ {{ item.start_date }}-{{ item.end_date }} ]</b></h6>
        {% if item.variations.all %} 
        <ul>{% for subitem in item.variations.all %} 
   <li>{{ subitem.category|capfirst }} : {{ subitem.title|capfirst }} {% endfor %}</li></ul>{% endif %}
        <small class="text-muted">{{ item.product.description}}</small>
    
    
        <div class='row'>
            {% if item.refund_requested %}
            <b>Refund is requested, It will take upto 7 days. Please wait.</b>
            {% elif item.refund_granted %}
            <b>Refund is granted successfully.</b>
            {% elif object.refund_requested or object.refund_granted %}
            <b>See below for status.</b>
            {% else %}
            {% if time or item.status == 'paid' %}
            <a href="{% url 'product-refund' item.id item.product.slug %}"> <button class='btn btn-danger btn-sm' style="margin-right: 5px;margin-left: 5px;">Request Refund</button></a></p>
            {% endif %}
            {% endif %}
    
    <a href="{% url 'review' item.product.slug %}"> <button class='btn btn-primary btn-sm'> Rate the product</button></a>
    {% if not paid %}
    <a href='{{ item.product.get_absolute_url }}'>  <button class='btn btn-warning btn-sm' style="margin-left: 5px;">  Add to cart Now?</button> </a>
    {% endif %}
        </div>
        </div>
        <div class='col-4'>
        <span class='text-muted'> Status : </span>
     <font color="green"> <strong> {{ item.status }} </strong></font>
        </div>
        <div>
        <br/>
        <span class="text-muted">${{ item.line_total }}</span>
     </div>
    </li>
    <hr/>
    {% endfor %}
      <li class="list-group-item d-flex justify-content-between">
        <span>Shipping Address :</span>
        <strong> {{ object.shipping_address.get_address }}</strong>
    </li>
    <li class="list-group-item d-flex justify-content-between">
        <span>Billing Address : </span>
        <strong> {{ object.billing_address.get_address }}</strong>
    </li>
    <li class="list-group-item d-flex justify-content-between">
        <span>Your Email :  </span>
        <strong>{{ object.billing_profile }}</strong>
    </li>
     <!-- <li class="list-group-item d-flex justify-content-between">
        <span>Order's Status : </span>
     <font color="green"> <strong> {{ object.get_status }} </strong></font>
    </li> -->
    {% if object.cart.coupon %}
    <li class="list-group-item d-flex justify-content-between bg-light">
        <div class="text-success">
        <h6 class="my-0">Promo code</h6>
        <small>{{ object.cart.coupon.code }}</small>
        </div>
        <span class="text-success">-${{ object.cart.coupon.amount }}</span>
    </li>
    {% endif %}
    <li class="list-group-item d-flex justify-content-between">
        <span>Cart Total (USD)</span>
    <font color="green"><strong>${{ object.cart.total }}</strong></font>
    </li>
    <li class="list-group-item d-flex justify-content-between">
        <span>Shipping Total (USD)</span>
    <font color="green"><strong>+ ${{ object.shipping_total }}</strong></font>
    </li>
    <li class="list-group-item d-flex justify-content-between">
        <span>Order Total (USD)</span>
     <font color="green"><strong>= ${{ object.total }}</strong></font>
    </li>
    </ul>

    

</div>