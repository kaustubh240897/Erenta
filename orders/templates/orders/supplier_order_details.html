{% extends "supplier_base.html" %}


{% block content %}



 <br/>

 <div class='row'>
    <div class='col-12 col-md-6 mx-auto'>
         <h2 class='text-center'>Order {{ object.order_id }}</h2>
          <hr/>
    </div>
</div>

<div class='row'>
    <div class='col-12 col-md-6 mx-auto'>
        <div class="col-md-12 mb-4">
    <h4 class="d-flex justify-content-between align-items-center mb-3">
    <span class="text-muted">Your order details</span>
    
    </h4>
    <ul class="list-group mb-3 z-depth-1">
     {% for item in object.cart.cartitem_set.all %}
     {% if item.product.user == request.user %}
        {% if item.product.image %}
        <img style="width:4rem !important; height:4rem !important;"  src='{{ item.product.image.url }}' class='img-fluid' />
        {% endif %}
    <li class="list-group-item d-flex justify-content-between lh-condensed">

        <div>
        <h6 class="my-0">{{ item.quantity }} x {{ item.product.product_name|capfirst }}</h6>
        <small class="text-muted">{{ item.product.description}}</small>
        </div>
         
     <div>
        <span class="text-muted">${{ item.line_total }}</span>
        </div>
       
    </li>
    <div>
        <strong> <font color='green'>Status: {{ item.status }} </font> {% if item.status == 'paid' %}  <a class='mx-4' title='If this Item is Shipped to the customer then click it' href='{% url "orders:update_status_to_shipped" object.order_id item.id %}'> Update status to Shipped?</a> {% endif %}
     {% if item.status == 'shipped' or item.status == 'refund requested' or item.status == 'cancellation request' %}   <a class='mx-4' title='If this Item is returned back after using it then click here.' href='{% url "orders:update_status_to_returned" object.order_id item.id %}'> Update status to returned back?</a> </strong> {% endif %}
        <hr/> 
       </div>
        
    {% endif %}
    {% endfor %}
     {% for item in object.cart.cartitem_set.all %}
     {% if item.product.user == request.user and forloop.counter == 1 %}
    <li class="list-group-item d-flex justify-content-between bg-light">
        <div class="text-success">
        <h6 class="my-0">Shipping Address</h6>
        <small>{{ object.shipping_address.get_address }}</small>
        </div>
    </li>
   <li class="list-group-item d-flex justify-content-between bg-light">
        <div class="text-success">
        <h6 class="my-0">Billing Address</h6>
        <small>{{ object.billing_address.get_address }}</small>
        </div>
    </li>
    <li class="list-group-item d-flex justify-content-between lh-condensed">
        <div class="text-danger">
        <h6 class="my-0">Customer's Email</h6>
        <small>{{ object.billing_profile }}</small>
        </div>
    </li>
   
    <!-- <li class="list-group-item d-flex justify-content-between lh-condensed">
        <div class="text-danger">
        <h6 class="my-0">Order's Status</h6>
        <small>{{ object.status }}</small> 
        </div>
    </li> -->
    </ul>
    </div>
    <div class='text-center'>
<a href="/supplierreviews/"> <button class='btn btn-primary'>Rate your customer!</button></a>
<a href="{% url 'supplierpdf' object.order_id %}"> <button class='btn btn-primary'>Print Invoice!</button></a>
</div>
  {% endif %}
  {% endfor %}
</div>
</div>

    
{% endblock %}